<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · FlowCytometry.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="FlowCytometry.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">FlowCytometry.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="usage/usage.html">Usage</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="gating/gating.html">Automatic Quality Control</a></li><li><a class="tocitem" href="compensation/compensation.html">Compensation</a></li><li><a class="tocitem" href="autofluorescence/autofluorescence.html">Autofluorescence compensation</a></li></ul></li><li class="is-active"><a class="tocitem" href="API.html">API</a><ul class="internal"><li><a class="tocitem" href="#Basic-Structures"><span>Basic Structures</span></a></li><li><a class="tocitem" href="#Operations-with-structures"><span>Operations with structures</span></a></li><li><a class="tocitem" href="#IO"><span>IO</span></a></li><li><a class="tocitem" href="#Gating"><span>Gating</span></a></li><li><a class="tocitem" href="#Compensation-(Spillover/Unmixing)"><span>Compensation (Spillover/Unmixing)</span></a></li><li><a class="tocitem" href="#Dimensionaity-reduction"><span>Dimensionaity reduction</span></a></li><li><a class="tocitem" href="#Clustering"><span>Clustering</span></a></li><li><a class="tocitem" href="#Ploting"><span>Ploting</span></a></li></ul></li><li><a class="tocitem" href="References.html">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="API.html">API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="API.html">API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/gatocor/FlowCytometry.jl/blob/master/docs/src/API.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Basic-Structures"><a class="docs-heading-anchor" href="#Basic-Structures">Basic Structures</a><a id="Basic-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Structures" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.FlowCytometryGate" href="#FlowCytometry.FlowCytometryGate"><code>FlowCytometry.FlowCytometryGate</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct FlowCytometryGate</code></pre><p>Structure that contains information from a gating process of the data.</p><p><strong>Elements:</strong></p><ul><li><strong>channels::Tuple{String,String}</strong> Channel names of the gate.</li><li><strong>polygon::Vector{Tuple{Real,Real}}</strong> Points of poligon that defines the gate.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L15-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.FlowCytometryControl" href="#FlowCytometry.FlowCytometryControl"><code>FlowCytometry.FlowCytometryControl</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct FlowCytometryControl</code></pre><p>Structure that stores the data coming from control stainings for correcting for spillover.  In order for the system to compute properly the spillover matrix, the names of the dictionary must correspond with the names in the channel labels in var.</p><p><strong>Elements</strong>:</p><ul><li><strong>channels::Vector{String}</strong> Name of the channels in the experiment.</li><li><strong>controls::Dict{String,FlowCytometryExperiment}</strong> Dictionary of FlowCytometryExperiments containing the control experiments.</li><li><strong>compensationMatrix::Union{Nothing,CompensationMatrix}</strong> Spillover matrix inverted.</li><li><strong>uns::Dict{String,Any}</strong> Dictionary where to store metainformation from spillover algorithm.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L261-L272">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.FlowCytometryExperiment" href="#FlowCytometry.FlowCytometryExperiment"><code>FlowCytometry.FlowCytometryExperiment</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct FlowCytometryExperiment</code></pre><p>Structure containing a Flow Cytometry experiment and all the processes applyied to it.</p><p><strong>Elements:</strong>   </p><ul><li><strong>channels::Vector{String}</strong> Name of the channels in the experiment.</li><li><strong>X::Matrix{AbstractFloat}</strong> Matrix of Cells X Channel of the experiment.</li><li><strong>obs::DataFrame</strong> Dataframe with all the metainformation of the cells</li><li><strong>var::DataFrame</strong> Dataframe with all the metainformation of the channels</li><li><strong>obsm::Dict{String,Matrix{AbstractFloat}}</strong> Dictionary containing transformed matrices of the original data.</li><li><strong>layers::Dict{String,Matrix{AbstractFloat}}</strong> Dictionary containing Cells X Channel matrices of data that are required to control (e.g. Raw matrix).</li><li><strong>gates::Dict{String,FlowCytometryGate}</strong> List of Gate and Gate set objects</li><li><strong>uns::Dict{String,Any}</strong> Dictionary contining all the metainformation of algorithms applied to the data.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L29-L44">source</a></section></article><h2 id="Operations-with-structures"><a class="docs-heading-anchor" href="#Operations-with-structures">Operations with structures</a><a id="Operations-with-structures-1"></a><a class="docs-heading-anchor-permalink" href="#Operations-with-structures" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.removeCells" href="#FlowCytometry.removeCells"><code>FlowCytometry.removeCells</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function removeCells(fcs::FlowCytometryExperiment, s::Vector{Bool})</code></pre><p>Remove cells from the dataset and return a copy.</p><p><strong>Arguments</strong>:</p><ul><li><strong>fcs::FlowCytometryExperiment</strong> Dataset to be pruned</li><li><strong>s::Vector{Bool}</strong> Array of cells to be removed.</li></ul><p><strong>Returns</strong> FlowCytometryExperiment with the cells not prunned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L157-L168">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.removeCells!" href="#FlowCytometry.removeCells!"><code>FlowCytometry.removeCells!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function removeCells!(fcs::FlowCytometryExperiment, s::Vector{Bool})</code></pre><p>Remove cells from the dataset.</p><p><strong>Arguments</strong>:</p><ul><li><strong>fcs::FlowCytometryExperiment</strong> Dataset to be pruned</li><li><strong>s::Vector{Bool}</strong> Array of cells to be removed.</li></ul><p><strong>Returns</strong> Nothing</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L186-L197">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.removeChannels" href="#FlowCytometry.removeChannels"><code>FlowCytometry.removeChannels</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function removeChannels(fcs::FlowCytometryExperiment, s::Vector{Bool})</code></pre><p>Remove channels from the dataset and return a copy.</p><p><strong>Arguments</strong>:</p><ul><li><strong>fcs::FlowCytometryExperiment</strong> Dataset to be pruned</li><li><strong>s::Vector{Bool}</strong> Array of channels to be removed.</li></ul><p><strong>Returns</strong> FlowCytometryExperiment with the channels not removed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L212-L223">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.removeChannels!" href="#FlowCytometry.removeChannels!"><code>FlowCytometry.removeChannels!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function removeChannels!(fcs::FlowCytometryExperiment, s::Vector{Bool})</code></pre><p>Remove channels from the dataset.</p><p><strong>Arguments</strong>:</p><ul><li><strong>fcs::FlowCytometryExperiment</strong> Dataset to be pruned</li><li><strong>s::Vector{Bool}</strong> Array of channels to be removed.</li></ul><p><strong>Returns</strong> FlowCytometryExperiment with the channels not removed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L238-L249">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.renameControl!" href="#FlowCytometry.renameControl!"><code>FlowCytometry.renameControl!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function renameControl!(fcs::FlowCytometryControl,oldName::String,newName::AbstractString)</code></pre><p>Change the name of the a channel in the of a FlowCytometryControl object.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryControl</strong> FlowCytometryControl where to change the name.</li><li><strong>oldName::String</strong> Old name of the channel.</li><li><strong>newName::AbstractString</strong> New name of the channel.</li></ul><p><strong>Returns</strong>  Nothing</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L284-L296">source</a></section><section><div><pre><code class="nohighlight hljs">function renameControl!(fcs::FlowCytometryControl,dic::Dict{&lt;:AbstractString,&lt;:AbstractString})</code></pre><p>Change the name of the channels in the of a FlowCytometryControl object.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryControl</strong> FlowCytometryControl where to change the name.</li><li><strong>dic::Dict{&lt;:AbstractString,&lt;:AbstractString}</strong> Dictionary of old names as keys and new names as values.</li></ul><p><strong>Returns</strong>  Nothing</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L307-L318">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.checkControlNames" href="#FlowCytometry.checkControlNames"><code>FlowCytometry.checkControlNames</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function checkControlNames(fcs::FlowCytometryControl)</code></pre><p>function that checks that the keys of the FlowCytometryControl object correspond to channels defined in .var.channels.</p><p><strong>Arguemtns</strong></p><ul><li><strong>fcs::FlowCytometryControl</strong> FlowCytometryControl object where to check if consistent.</li></ul><p><strong>Returns</strong>  Gives an error if there is any inconsistency.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/structures.jl#L328-L338">source</a></section></article><h2 id="IO"><a class="docs-heading-anchor" href="#IO">IO</a><a id="IO-1"></a><a class="docs-heading-anchor-permalink" href="#IO" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.loadFCExperiment" href="#FlowCytometry.loadFCExperiment"><code>FlowCytometry.loadFCExperiment</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function loadFCExperiment(file::String)</code></pre><p>Function that loads a ftc experiment into a FlowCytometryExperiment.</p><p><strong>Arguments</strong>:</p><ul><li><strong>file::String</strong>: Path to .ftc file.</li></ul><p><strong>Returns</strong>:  FlowCytometryExperiment with the data from the uploaded file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/IO.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.loadFCControls" href="#FlowCytometry.loadFCControls"><code>FlowCytometry.loadFCControls</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function loadFCControls(dic::Dict{String,String})</code></pre><p>Function to upload all the files as given by a dictionary of control files and the corresponding channels.</p><p><strong>Arguments</strong></p><ul><li><strong>dic::Dict{String,String}</strong> Dictionary with <code>name_of_file</code>=&gt;<code>name_of_controlled_channel</code>.</li></ul><p><strong>Returns</strong>  FlowCytometryControl object with all the controls uploaded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/IO.jl#L30-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.saveH5fcs" href="#FlowCytometry.saveH5fcs"><code>FlowCytometry.saveH5fcs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function saveH5fcs(fcs::FlowCytometryExperiment,file::String)</code></pre><p>Function to save in .h5fcs a FlowCytometryExperiment.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryExperiment</strong> FlowCytometryExperiment to save.</li><li><strong>file::String</strong> File name where to store the data.</li></ul><p><strong>Returns</strong> Nothing</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/IO.jl#L139-L149">source</a></section><section><div><pre><code class="nohighlight hljs">function saveH5fcs(fcs::FlowCytometryControl,file::String)</code></pre><p>Function to save in .h5fcs a FlowCytometryControl.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryControl</strong> FlowCytometryControl to save.</li><li><strong>file::String</strong> File name where to store the data.</li></ul><p><strong>Returns</strong> Nothing</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/IO.jl#L173-L183">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.loadH5fcs" href="#FlowCytometry.loadH5fcs"><code>FlowCytometry.loadH5fcs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function loadH5fcs(file::String)</code></pre><p>Function to load .h5fcs files into data.</p><p><strong>Arguments</strong></p><ul><li><strong>file::String</strong> File name of the datafile.</li></ul><p><strong>Returns</strong> FlowCytometryControl or FlowCytometryExperiment loaded from file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/IO.jl#L271-L280">source</a></section></article><h2 id="Gating"><a class="docs-heading-anchor" href="#Gating">Gating</a><a id="Gating-1"></a><a class="docs-heading-anchor-permalink" href="#Gating" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.isInsideGate" href="#FlowCytometry.isInsideGate"><code>FlowCytometry.isInsideGate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function isInsideGate(p::Tuple{&lt;:Real,&lt;:Real}, gate::FlowCytometryGate)</code></pre><p>Function that given a point and a gate, checks which entries are inside the gate polygon.</p><p><strong>Arguments</strong>:</p><ul><li><strong>p::Tuple{&lt;:Real,&lt;:Real}</strong> Point to check if inside polygon.</li><li><strong>gate::FlowCytometryGate</strong> Gate to check if the rows are inside the polygon of the gate.</li></ul><p><strong>Returns</strong>:  Bool. True entries are the ones inside the gate polygon.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/inPolygon.jl#L68-L79">source</a></section><section><div><pre><code class="nohighlight hljs">function isInsideGate(x::Matrix{&lt;:Real}, gate::FlowCytometryGate)</code></pre><p>Function that given the entries of two channels and a gate checks which entries are inside the gate polygon.</p><p><strong>Arguments</strong>:</p><ul><li><strong>x::Matrix{&lt;:Real}</strong> Matrix with N cells and 2 columns (channels).</li><li><strong>gate::FlowCytometryGate</strong> Gate to check if the rows are inside the polygon of the gate.</li></ul><p><strong>Returns</strong>:  Vector{Bool} with N entries. True entries are the ones inside the gate polygon.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/inPolygon.jl#L148-L159">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.Gating.filterByGate!" href="#FlowCytometry.Gating.filterByGate!"><code>FlowCytometry.Gating.filterByGate!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function filterByGate!(fcs::FlowCytometryExperiment,gate::FlowCytometryGate,addKey::String)</code></pre><p>Function that checks which cells are inside a gate.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryExperiment</strong> FlowCytometryExperiment where to compute the gate</li><li><strong>gate::FlowCytometryGate</strong> Gate to filter the cells.</li><li><strong>addKey::String</strong> Kay to be added in .obs</li></ul><p><strong>Returns</strong> Nothing. A columns with <code>addKey</code> is added to .obs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/gates.jl#L429-L441">source</a></section><section><div><pre><code class="nohighlight hljs">function filterByGate!(fcs::FlowCytometryExperiment,gates::Vector{FlowCytometryGate},addKey::String)</code></pre><p>Function that checks which cells are inside a set of gates.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryExperiment</strong> FlowCytometryExperiment where to compute the gate</li><li><strong>gates::Vector{FlowCytometryGate}</strong> Set of gates to filter the cells.</li><li><strong>addKey::String</strong> Kay to be added in .obs</li></ul><p><strong>Returns</strong> Nothing. A columns with <code>addKey</code> is added to .obs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/gates.jl#L452-L464">source</a></section><section><div><pre><code class="nohighlight hljs">function filterByGate!(fcs::FlowCytometryExperiment,gateName::String,addKey=string(gateName,&quot;_gate&quot;))</code></pre><p>Function that checks which cells are inside a gate.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryExperiment</strong> FlowCytometryExperiment where to compute the gate</li><li><strong>gateName::String</strong> Name of gate inside FlowCytometryExperiment.</li><li><strong>addKey::String=string(gateName,&quot;_gate&quot;)</strong> Key to be added in .obs</li></ul><p><strong>Returns</strong> Nothing. A columns with <code>addKey</code> is added to .obs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/gates.jl#L479-L492">source</a></section><section><div><pre><code class="nohighlight hljs">function filterByGate!(fcs::FlowCytometryExperiment,gateNames::Vector{String},addKey)</code></pre><p>Function that checks which cells are inside a set of gates.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryExperiment</strong> FlowCytometryExperiment where to compute the gate</li><li><strong>gateNames::Vector{String}</strong> Name of gates inside FlowCytometryExperiment.</li><li><strong>addKey::String=string(gateName,&quot;_gate&quot;)</strong> Key to be added in .obs</li></ul><p><strong>Returns</strong> Nothing. A columns with <code>addKey</code> is added to .obs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/gates.jl#L503-L516">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.Gating.manualGating!" href="#FlowCytometry.Gating.manualGating!"><code>FlowCytometry.Gating.manualGating!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function manualGating!(fcs::FlowCytometryExperiment;debug=false)</code></pre><p>Launch an interactive page accessible at localhost to define gates manually.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryExperiment</strong> FlowCytometryExperiment object where to define the gates.</li></ul><p><strong>Returns</strong>  Nothing. Adds or removes the gates to the object in place.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/gates.jl#L5-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.Gating.automaticQC!" href="#FlowCytometry.Gating.automaticQC!"><code>FlowCytometry.Gating.automaticQC!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function automaticQC!(fcs::FlowCytometryExperiment;
    channel1=&quot;FSC-A&quot;,channel2=&quot;SSC-A&quot;,
    trim::Tuple{&lt;:Real,&lt;:Real}=(0.01,0.99),
    maxtrim::Real=.05,
    densityBandwidth::Tuple{&lt;:Real,&lt;:Real}=(.5,.3),
    finalBandwidth=.1,
    heightFromMax=.3,
    subsample=2000,
    keyAdded=&quot;automaticQC&quot;,
    seed = 0)</code></pre><p>Function that automatically detects the main peak corresponding to viable cells in a FCS/SSC scatterplot and adds a gate to the object.  The method follows the heuristics of <a href="https://www.nature.com/articles/s41467-021-23126-8">Roca et al</a> with some small adaptations.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryExperiment</strong> FlowCytometryExperiment where to compute the gate</li></ul><p><strong>Keyword arguments</strong></p><ul><li><strong>channel1=&quot;FSC-A&quot;</strong> Channel name in channels corrresponding to the forwad scatter</li><li><strong>channel2=&quot;SSC-A&quot;</strong> Channel name in channels corrresponding to the forwad scatter</li><li><strong>trim::Tuple{&lt;:Real,&lt;:Real}=(0.01,0.99)</strong> Percentile range in the channel ranges to use in the analysis before finding maximums.</li><li><strong>maxtrim::Real=.05</strong> Minimum in the range channels where to accept maximum points. This avoids the peak present in some datasets at lower expressions (debris).</li><li><strong>densityBandwidth::Tuple{&lt;:Real,&lt;:Real}=(.5,.3)</strong> Relative bandwidth to smooth the density plots.</li><li><strong>finalBandwidth=.1</strong> Relative bandwidth to smooth the density plots in the final step.</li><li><strong>heightFromMax=.3</strong> In the last step, heigh at global maximum where to draw the contour of the QC region. Points with more probability that that will be used to make the QC gate.</li><li><strong>subsample=2000</strong> Subsample of points used for density steps of the system. Set to &#39;nothing&#39; for using all the points (this can be extremely slow), with relative low numbers of points the gate output are already very good.</li><li><strong>keyAdded=&quot;automaticQC&quot;</strong> Key added to uns and gate name.</li><li><strong>seed = 0</strong> Seed to make subsampling reproducible.</li></ul><p><strong>Returns</strong> Nothing. A gate of automatic control is added to gates.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/gates.jl#L215-L248">source</a></section></article><h2 id="Compensation-(Spillover/Unmixing)"><a class="docs-heading-anchor" href="#Compensation-(Spillover/Unmixing)">Compensation (Spillover/Unmixing)</a><a id="Compensation-(Spillover/Unmixing)-1"></a><a class="docs-heading-anchor-permalink" href="#Compensation-(Spillover/Unmixing)" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.Compensation.computeCompensationMatrix!" href="#FlowCytometry.Compensation.computeCompensationMatrix!"><code>FlowCytometry.Compensation.computeCompensationMatrix!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function computeCompensationMatrix!(fcs::FlowCytometryControl; error::AbstractFloat = 10E-5, nMaxiterations::Int=10)</code></pre><p>Compute the compensation matrix as proposed by <a href="https://www.nature.com/articles/s41467-021-23126-8">Roca et al</a>.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryControl</strong> FlowCytometryControl where to compute the spillover matrix.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><strong>error::AbstractFloat = 10E-5</strong> Maximum error to stop the refinement of the spillover matrix.</li><li><strong>nMaxIterations::Int=10</strong> Maximum number of iterations of the refinement matrix. Set to 0 to compute the classical spillover matrix.</li></ul><p><strong>Results</strong>  Nothing. Adds the compensation matrix to the FlowCytometryControl object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/compensation.jl#L8-L22">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.Compensation.compensate!" href="#FlowCytometry.Compensation.compensate!"><code>FlowCytometry.Compensation.compensate!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function compensate!(fcs::FlowCytometryControl)</code></pre><p>Compensate all the control experiments with the compensationMatrix of the object</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryControl</strong> FlowCytometryControl object where to compute the compensation.</li></ul><p><strong>Returns</strong> Nothing</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/compensation.jl#L143-L153">source</a></section><section><div><pre><code class="nohighlight hljs">function compensate!(fcs::FlowCytometryExperiment,compensation::CompensationMatrix)</code></pre><p>Compensate FlowCytometryExperiment experiment with the compensationMatrix from an FlowCytometryControl object.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryExperiment</strong> FlowCytometryExperiment object where to compute the compensation.</li><li><strong>compensation::CompensationMatrix</strong> CompensationMatrix object</li></ul><p><strong>Returns</strong> Nothing, compensated the matrix X from fcs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/compensation.jl#L175-L186">source</a></section></article><h2 id="Dimensionaity-reduction"><a class="docs-heading-anchor" href="#Dimensionaity-reduction">Dimensionaity reduction</a><a id="Dimensionaity-reduction-1"></a><a class="docs-heading-anchor-permalink" href="#Dimensionaity-reduction" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.DimensionalityReduction.pca!" href="#FlowCytometry.DimensionalityReduction.pca!"><code>FlowCytometry.DimensionalityReduction.pca!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function pca!(fct::FlowCytometryExperiment;
    maxoutdim::Int = 0,
    method::Symbol = :auto,
    variance_ratio::Float64 = 0.99,
    mean = nothing,
    key_added::String = &quot;pca&quot;,
    key_used_channels::Union{Nothing,String} = nothing
    )</code></pre><p>Perform pca analysis over the channels.</p><p><strong>Arguments</strong>:</p><ul><li><strong>fct::FlowCytometryExperiment</strong> FlowCytometryExperiment to perform the pca.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><strong>maxoutdim = 0</strong> Number of PCS to compute if 0, it will compute NChannels-1</li><li><strong>method = :auto</strong> Method to compute pca. Choose between :svd, :cov and :auto.</li><li><strong>variance_ratio = 0.99</strong> Variance ratio up to which compute pca.</li><li><strong>mean = nothing</strong> If to consider the normalization as performed. nothing will consider the mean not adjusted.</li><li><strong>key_added::String = &quot;pca&quot;</strong> Key to be added to object.</li><li><strong>key<em>used</em>channels::Union{Nothing,String} = nothing</strong> Bool column from .var specifying which channels to use for clustering.</li></ul><p><strong>Returns</strong>  Nothing. To the FlowCytometryExperiment object provided, PCs are added to the .obsm[key<em>added] and information of the algorithm if included in .uns[key</em>added].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/dimensionalityReduction.jl#L7-L32">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.DimensionalityReduction.umap!" href="#FlowCytometry.DimensionalityReduction.umap!"><code>FlowCytometry.DimensionalityReduction.umap!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function umap!(fct::FlowCytometryExperiment;
    n_dims::Int = 2,
    key_added::String = &quot;umap&quot;,
    key_obsm::Union{Nothing,String} = nothing,
    n_components::Union{Nothing,Int} = nothing,
    key_used_channels::Union{Nothing,String} = nothing,
    kwargs...
    )</code></pre><p>Function that computes the UMAP plot of the neighbors.</p><p><strong>Arguments</strong></p><ul><li><strong>fct::FlowCytometryExperiment</strong> FlowCytometryExperiment to perform the UMAP.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><strong>n_dims::Int = 2</strong> Number of dimensions for the projection.</li><li><strong>key_added::String = &quot;KMeans&quot;</strong> Key to be added to object.</li><li><strong>key_obsm::Union{Nothing,String} = nothing</strong> Matrix in .obsm to use for the clustering. Only key<em>obsm or key</em>used_channels can be specified.</li><li><strong>n_components::Union{Nothing,Int} = nothing</strong> Number of components to use from the .obsm.</li><li><strong>key<em>used</em>channels::Union{Nothing,String} = nothing</strong> Bool column from .var specifying which channels to use for clustering.</li><li><strong>kwargs...</strong> Keyword argumetns for the UMAP_ function. Do ?FlowCytometry.UMAP_ for more details on the keyword arguments.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/dimensionalityReduction.jl#L72-L94">source</a></section></article><h2 id="Clustering"><a class="docs-heading-anchor" href="#Clustering">Clustering</a><a id="Clustering-1"></a><a class="docs-heading-anchor-permalink" href="#Clustering" title="Permalink"></a></h2><p>&lt;!– Clustering.kmeansTuning Clustering.agglomerative! –&gt;</p><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.Clustering.kmeans!" href="#FlowCytometry.Clustering.kmeans!"><code>FlowCytometry.Clustering.kmeans!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function kmeans!(fct::FlowCytometryExperiment;
    k::Int = 2, 
    metric = Distances.SqEuclidean(0.0),
    init::Symbol = :kmpp,
    key_added::String = &quot;kmeans&quot;,
    key_obsm::Union{Nothing,String} = nothing,
    n_components::Union{Nothing,Int} = nothing,
    key_used_channels::Union{Nothing,String} = nothing)</code></pre><p>Function that clusters the data using the KMeans algorithm. To help asses the number of clusters you can use <strong>KMeansTuning</strong> function.</p><p><strong>Arguments</strong></p><ul><li><strong>fct::FlowCytometryExperiment</strong> FlowCytometryExperiment to cluster the data.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><strong>k::Int</strong> Number of clusters to partition the data.</li><li><strong>metric = Distances.SqEuclidean(0.0)</strong> Metric to compute distances. </li><li><strong>init::Symbol = :kmpp</strong> Initialisation algorithm of the KMeans. Choose between :kmpp, :rand or :kmenc. ?Clustering.kmeans_ for more information.</li><li><strong>key_added::String = &quot;KMeans&quot;</strong> Key to be added to object.</li><li><strong>key_obsm::Union{Nothing,String} = nothing</strong> Matrix in .obsm to use for the clustering. Only key<em>obsm or key</em>used_channels can be specified.</li><li><strong>n_components::Union{Nothing,Int} = nothing</strong> Number of components to use from the .obsm.</li><li><strong>key_used _channels::Union{Nothing,String} = nothing</strong> Bool column from .var specifying which channels to use for clustering.</li></ul><p><strong>Returns</strong>  Nothing. To the FlowCytometryExperiment object provided, clusters identities are added to the .obs[key<em>added] and information of the algorithm if included in .uns[key</em>added].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/clustering.jl#L8-L36">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>Clustering.gaussianMixture!</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Ploting"><a class="docs-heading-anchor" href="#Ploting">Ploting</a><a id="Ploting-1"></a><a class="docs-heading-anchor-permalink" href="#Ploting" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.FCSPloting.plotQCSteps" href="#FlowCytometry.FCSPloting.plotQCSteps"><code>FlowCytometry.FCSPloting.plotQCSteps</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function plotQCSteps(fcs::FlowCytometryExperiment,key::String=&quot;automaticQC&quot;)</code></pre><p>Function that returns the ploting steps from automaticQC.</p><p><strong>Arguments</strong></p><ul><li><strong>fcs::FlowCytometryExperiment</strong> FlowCytometryExperiment object where to define the gates.</li><li><strong>key::String=&quot;automaticQC&quot;</strong> Key used to save the results from the automatic control object.</li></ul><p><strong>Returns</strong>  Figure with the steps ploted.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/ploting.jl#L4-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.FCSPloting.plotControls" href="#FlowCytometry.FCSPloting.plotControls"><code>FlowCytometry.FCSPloting.plotControls</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function plotControls(fcsControl::FlowCytometryControl,channels::Vector{Tuple{String,String}})</code></pre><p>Function that makes an scatterplot of the tuples of channels among controls and channels to see the spillover. If computeCompensationMatrix! has been computed, it also plots the correction after the control.</p><p><strong>Arguments:</strong></p><ul><li><strong>fcsControl::FlowCytometryControl</strong> FlowCytometryControl object where to check the spillover.</li><li><strong>channels::Vector{Tuple{String,String}}</strong> Vetor of Tuples of control sample and spilled channel that want to be seen.</li></ul><p><strong>Returns</strong> List of figures with all the scatterplots between tuples. It can be ploted using plot(returned...,layout=(...))</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/ploting.jl#L91-L102">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FlowCytometry.FCSPloting.plotControlsCorrelations" href="#FlowCytometry.FCSPloting.plotControlsCorrelations"><code>FlowCytometry.FCSPloting.plotControlsCorrelations</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function plotControlsCorrelations(fcsControl::FlowCytometryControl)</code></pre><p>Function that displays a heatmap with the correlation between controls and channels. It can work as a summary of spillover between data.</p><p><strong>Arguments:</strong></p><ul><li><strong>fcsControl::FlowCytometryControl</strong> FlowCytometryControl object to compute the correlations between channels.</li></ul><p><strong>Return</strong>  Heatmap figure with the control channels in rows and channels in columns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gatocor/FlowCytometry.jl/blob/d71f207119de07cb821fd1df3126b3e5747d796f/src/ploting.jl#L59-L69">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="autofluorescence/autofluorescence.html">« Autofluorescence compensation</a><a class="docs-footer-nextpage" href="References.html">References »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Thursday 5 January 2023 15:21">Thursday 5 January 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
